<div id="sidebar">
    <h1 id="sidebar_name"></h1>
    <hr id="sidebar_hr"/>
    <ul id="sidebar_menu">
        <li class="sidebar_option selected">
            <img src="resources/img/main.html/Plants.png" class="option_icon">
            <span>My Plants</span>
        </li>
        <li class="sidebar_option">
            <img src="resources/img/main.html/Company.png" class="option_icon">
            <span>My Company</span>
        </li>
        <li class="sidebar_option">
            <img src="resources/img/main.html/Account.png" class="option_icon">
            <span>My Account</span>
        </li>
        <li class="sidebar_option">
            <img src="resources/img/main.html/System.png" class="option_icon">
            <span>Shell</span>
        </li>
        <li class="sidebar_option">
            <img src="resources/img/main.html/Account.png" class="option_icon">
            <span>Accounts</span>
        </li>
        <li class="sidebar_option">
            <img src="resources/img/main.html/Company.png" class="option_icon">
            <span>Companies</span>
        </li>
        <li class="sidebar_option">
            <img src="resources/img/main.html/System.png" class="option_icon">
            <span>Sensors</span>
        </li>
    </ul>
    <button id="sidebar_logout" class="sidebar_option">Logout!</button>
</div>

<iframe id="content" frameBorder="0">
    You are using an unsupported Browser.
</iframe>

<script>
    // loading stylesheet
    $("<link/>", {
        rel: "stylesheet",
        type: "text/css",
        href: "resources/css/includes/main.css"
    }).appendTo("head");

    // call logout script
    $("#sidebar_logout").click(function() {
        $.get("ajax/logout.php", function (response) {
            console.log("[ajax/logout.php][logoutSuccess:] " + JSON.parse(response).logoutSuccess);
            location.reload();
        });
    });

    $(".sidebar_option").click(function () {
        $(".sidebar_option").removeClass("selected");
        $(this).addClass("selected");

        $("#content").attr('src', "ajax/getContentForUser.php?page_name=" + $(this).children("span").text().toLowerCase());
        console.log("[ajax/getContentForUser.php][requestedPage:] " + $(this).children("span").text().toLowerCase());

    });

    $.get("ajax/getUserData.php", function (response) {
        console.log(response);
        $("#sidebar_name").html(JSON.parse(response).userData.firstName + " " + JSON.parse(response).userData.name);

        // if role is not high enough, remove items from sidebar

        if(JSON.parse(response).userData.role != 3) {
            $("ul li:nth-child(7)").remove(); // remove system if roleLvl not high enough
            $("ul li:nth-child(4)").remove(); // remove system if roleLvl not high enough
            $("ul li:nth-child(5)").remove(); // remove system if roleLvl not high enough
            $("ul li:nth-child(4)").remove(); // remove system if roleLvl not high enough
        }

        if(JSON.parse(response).userData.role < 2) {

            $("ul li:nth-child(2)").remove(); // remove accounts if roleLvl not high enough

        }
    })
</script>